{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "MCQArtifact",
    "type": "object",
    "required": ["artifact_type", "version", "questions"],
    "properties": {
      "artifact_type": { "const": "mcq" },
      "version": { "type": "string" },
      "questions": {
        "type": "array",
        "items": {
          "type": "object",
          "required": ["id", "stem", "options", "answer_index", "rationale"],
          "properties": {
            "id": { "type": "string" },
            "stem": { "type": "string", "minLength": 1 },
            "options": {
              "type": "array",
              "minItems": 4,
              "maxItems": 6,
              "items": { "type": "string" }
            },
            "answer_index": { "type": "integer", "minimum": 0 },
            "rationale": { "type": "string", "minLength": 1 },
            "bloom_level": {
              "type": "string",
              "enum": ["remember", "understand", "apply", "analyze", "evaluate", "create"]
            },
            "source_refs": { "type": "array", "items": { "type": "string" }, "default": [] }
          },
          "additionalProperties": false,
          "allOf": [
            { "if": { "properties": { "options": { "minItems": 1 } }, "required": ["options"] },
              "then": { "properties": { "answer_index": { "maximum": 5 } } } }
          ]
        }
      },
      "provenance": { "type": "object", "additionalProperties": true },
      "metrics": { "type": "object", "additionalProperties": true }
    },
    "additionalProperties": false
  }
  